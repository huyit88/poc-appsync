{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.235.1"},"children":{"SystemApiStack":{"id":"SystemApiStack","path":"SystemApiStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.235.1"},"children":{"AppSyncApi":{"id":"AppSyncApi","path":"SystemApiStack/AppSyncApi","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"},"children":{"Api":{"id":"Api","path":"SystemApiStack/AppSyncApi/Api","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.GraphqlApi","version":"2.235.1","metadata":[]},"children":{"ApiLogsRole":{"id":"ApiLogsRole","path":"SystemApiStack/AppSyncApi/Api/ApiLogsRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.235.1","metadata":[]},"children":{"ImportApiLogsRole":{"id":"ImportApiLogsRole","path":"SystemApiStack/AppSyncApi/Api/ApiLogsRole/ImportApiLogsRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.235.1","metadata":[]}},"Resource":{"id":"Resource","path":"SystemApiStack/AppSyncApi/Api/ApiLogsRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"appsync.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSAppSyncPushToCloudWatchLogs"]]}]}}}}},"Resource":{"id":"Resource","path":"SystemApiStack/AppSyncApi/Api/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnGraphQLApi","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::GraphQLApi","aws:cdk:cloudformation:props":{"authenticationType":"API_KEY","logConfig":{"cloudWatchLogsRoleArn":{"Fn::GetAtt":["AppSyncApiApiLogsRoleB99A02E9","Arn"]},"fieldLogLevel":"ALL"},"name":"SystemApi","xrayEnabled":true}}},"Schema":{"id":"Schema","path":"SystemApiStack/AppSyncApi/Api/Schema","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnGraphQLSchema","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::GraphQLSchema","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["AppSyncApiEBDAEC17","ApiId"]},"definition":"# Composed GraphQL Schema\n# This file is auto-generated by scripts/compose-schema.ts\n# Do not edit this file directly. Edit domain schemas instead.\n\n# === CLAIMS DOMAIN ===\n# Claim Domain Schema\n\ntype Claim {\n  claimId: ID!\n  customerId: ID!\n  policyId: ID\n  claimType: String!\n  status: String!\n  amount: Float\n  submittedAt: AWSDateTime!\n  updatedAt: AWSDateTime!\n}\n\n\n\ntype ClaimConnection {\n  items: [Claim!]!\n  nextToken: String\n}\n\ntype ClaimWithCustomer {\n  claim: Claim!\n  customer: Customer!\n}\n\n# === CUSTOMERS DOMAIN ===\n# Customer Domain Schema\n\ntype Customer {\n  customerId: ID!\n  fullName: String!\n  email: String\n  phone: String\n  updatedAt: AWSDateTime!\n}\n\n# Import Claim types (will be merged by compose-schema.ts)\n# Claim and ClaimConnection are defined in claims domain\n\ntype CustomerWithClaims {\n  customer: Customer!\n  claims: ClaimConnection!\n}\n\ntype Query {\n  listClaimsByCustomer(customerId: ID!, limit: Int, nextToken: String): ClaimConnection\n  getClaimWithCustomer(claimId: ID!): ClaimWithCustomer\n  listClaimsByCustomerAurora(customerId: ID!, limit: Int, nextToken: String): ClaimConnection\n  getClaimWithCustomerAurora(claimId: ID!): ClaimWithCustomer\n  getCustomer(customerId: ID!): Customer\n  getCustomerByPhone(phone: String!): Customer\n  getCustomerByPhoneLambda(phone: String!): Customer\n  getCustomerByEmail(email: String!): Customer\n  getCustomerWithClaims(customerId: ID!, limit: Int, nextToken: String): CustomerWithClaims\n  getCustomerAurora(customerId: ID!): Customer\n  getCustomerByPhoneAurora(phone: String!): Customer\n  getCustomerByEmailAurora(email: String!): Customer\n  getCustomerWithClaimsAurora(customerId: ID!, limit: Int, nextToken: String): CustomerWithClaims\n}\n\nschema {\n  query: Query\n}"}}},"DefaultApiKey":{"id":"DefaultApiKey","path":"SystemApiStack/AppSyncApi/Api/DefaultApiKey","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnApiKey","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::ApiKey","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["AppSyncApiEBDAEC17","ApiId"]},"expires":1801291549}}},"LogRetention":{"id":"LogRetention","path":"SystemApiStack/AppSyncApi/Api/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.235.1"},"children":{"Resource":{"id":"Resource","path":"SystemApiStack/AppSyncApi/Api/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.235.1"}}}},"LogGroup":{"id":"LogGroup","path":"SystemApiStack/AppSyncApi/Api/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.235.1","metadata":[]}},"DynamoDataSource":{"id":"DynamoDataSource","path":"SystemApiStack/AppSyncApi/Api/DynamoDataSource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.DynamoDbDataSource","version":"2.235.1"},"children":{"ServiceRole":{"id":"ServiceRole","path":"SystemApiStack/AppSyncApi/Api/DynamoDataSource/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.235.1","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"SystemApiStack/AppSyncApi/Api/DynamoDataSource/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.235.1","metadata":[]}},"Resource":{"id":"Resource","path":"SystemApiStack/AppSyncApi/Api/DynamoDataSource/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"appsync.amazonaws.com"}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"SystemApiStack/AppSyncApi/Api/DynamoDataSource/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.235.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SystemApiStack/AppSyncApi/Api/DynamoDataSource/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["DynamoDBTableFD3F8884","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["DynamoDBTableFD3F8884","Arn"]},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"AppSyncApiDynamoDataSourceServiceRoleDefaultPolicy0C36E7A8","roles":[{"Ref":"AppSyncApiDynamoDataSourceServiceRole9A72A66A"}]}}}}}}},"Resource":{"id":"Resource","path":"SystemApiStack/AppSyncApi/Api/DynamoDataSource/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnDataSource","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::DataSource","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["AppSyncApiEBDAEC17","ApiId"]},"dynamoDbConfig":{"tableName":{"Ref":"DynamoDBTableFD3F8884"},"awsRegion":"ap-southeast-1"},"name":"SystemApiDynamoDataSource","serviceRoleArn":{"Fn::GetAtt":["AppSyncApiDynamoDataSourceServiceRole9A72A66A","Arn"]},"type":"AMAZON_DYNAMODB"}}}}},"RdsDataSource":{"id":"RdsDataSource","path":"SystemApiStack/AppSyncApi/Api/RdsDataSource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.RdsDataSource","version":"2.235.1"},"children":{"ServiceRole":{"id":"ServiceRole","path":"SystemApiStack/AppSyncApi/Api/RdsDataSource/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.235.1","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"SystemApiStack/AppSyncApi/Api/RdsDataSource/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.235.1","metadata":[]}},"Resource":{"id":"Resource","path":"SystemApiStack/AppSyncApi/Api/RdsDataSource/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"appsync.amazonaws.com"}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"SystemApiStack/AppSyncApi/Api/RdsDataSource/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.235.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SystemApiStack/AppSyncApi/Api/RdsDataSource/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["secretsmanager:DescribeSecret","secretsmanager:GetSecretValue"],"Effect":"Allow","Resource":[{"Ref":"AuroraCredentialsAttachmentD4B71BEE"},{"Ref":"AuroraCredentialsE58A9146"}]},{"Action":["rds-data:BatchExecuteStatement","rds-data:BeginTransaction","rds-data:CommitTransaction","rds-data:ExecuteStatement","rds-data:RollbackTransaction"],"Effect":"Allow","Resource":{"Fn::Join":["",["arn:aws:rds:ap-southeast-1:848360038404:cluster:",{"Ref":"AuroraClusterD4EFE71C"}]]}},{"Action":["rds-data:DeleteItems","rds-data:ExecuteSql","rds-data:GetItems","rds-data:InsertItems","rds-data:UpdateItems"],"Effect":"Allow","Resource":[{"Fn::Join":["",["arn:aws:rds:ap-southeast-1:848360038404:cluster:",{"Ref":"AuroraClusterD4EFE71C"},":*"]]},{"Fn::Join":["",["arn:aws:rds:ap-southeast-1:848360038404:cluster:",{"Ref":"AuroraClusterD4EFE71C"}]]}]},{"Action":"rds-db:connect","Effect":"Allow","Resource":{"Fn::Join":["",["arn:aws:rds-db:ap-southeast-1:848360038404:dbuser:",{"Fn::Select":[6,{"Fn::Split":[":",{"Fn::GetAtt":["AuroraClusterProxy15D20DFD","DBProxyArn"]}]}]},"/postgres"]]}}],"Version":"2012-10-17"},"policyName":"AppSyncApiRdsDataSourceServiceRoleDefaultPolicyF42A2E80","roles":[{"Ref":"AppSyncApiRdsDataSourceServiceRole3CB98E84"}]}}}}}}},"Resource":{"id":"Resource","path":"SystemApiStack/AppSyncApi/Api/RdsDataSource/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnDataSource","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::DataSource","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["AppSyncApiEBDAEC17","ApiId"]},"name":"RdsDataSource","relationalDatabaseConfig":{"rdsHttpEndpointConfig":{"awsRegion":"ap-southeast-1","dbClusterIdentifier":{"Fn::Join":["",["arn:aws:rds:ap-southeast-1:848360038404:cluster:",{"Ref":"AuroraClusterD4EFE71C"}]]},"awsSecretStoreArn":{"Ref":"AuroraCredentialsE58A9146"},"databaseName":"systemapi"},"relationalDatabaseSourceType":"RDS_HTTP_ENDPOINT"},"serviceRoleArn":{"Fn::GetAtt":["AppSyncApiRdsDataSourceServiceRole3CB98E84","Arn"]},"type":"RELATIONAL_DATABASE"}}}}},"DynamoDBGetCustomerResolver":{"id":"DynamoDBGetCustomerResolver","path":"SystemApiStack/AppSyncApi/Api/DynamoDBGetCustomerResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.235.1"},"children":{"Code":{"id":"Code","path":"SystemApiStack/AppSyncApi/Api/DynamoDBGetCustomerResolver/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.235.1"},"children":{"Stage":{"id":"Stage","path":"SystemApiStack/AppSyncApi/Api/DynamoDBGetCustomerResolver/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.235.1"}},"AssetBucket":{"id":"AssetBucket","path":"SystemApiStack/AppSyncApi/Api/DynamoDBGetCustomerResolver/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.235.1","metadata":[]}}}},"Resource":{"id":"Resource","path":"SystemApiStack/AppSyncApi/Api/DynamoDBGetCustomerResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["AppSyncApiEBDAEC17","ApiId"]},"codeS3Location":"s3://cdk-hnb659fds-assets-848360038404-ap-southeast-1/5b70cab790f0c2cec376741eb3f60ba3c830737666385a3b241db9a4afcfd7c1.js","dataSourceName":"SystemApiDynamoDataSource","fieldName":"getCustomer","kind":"UNIT","runtime":{"name":"APPSYNC_JS","runtimeVersion":"1.0.0"},"typeName":"Query"}}}}},"DynamoDBGetCustomerByEmailResolver":{"id":"DynamoDBGetCustomerByEmailResolver","path":"SystemApiStack/AppSyncApi/Api/DynamoDBGetCustomerByEmailResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.235.1"},"children":{"Code":{"id":"Code","path":"SystemApiStack/AppSyncApi/Api/DynamoDBGetCustomerByEmailResolver/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.235.1"},"children":{"Stage":{"id":"Stage","path":"SystemApiStack/AppSyncApi/Api/DynamoDBGetCustomerByEmailResolver/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.235.1"}},"AssetBucket":{"id":"AssetBucket","path":"SystemApiStack/AppSyncApi/Api/DynamoDBGetCustomerByEmailResolver/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.235.1","metadata":[]}}}},"Resource":{"id":"Resource","path":"SystemApiStack/AppSyncApi/Api/DynamoDBGetCustomerByEmailResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["AppSyncApiEBDAEC17","ApiId"]},"codeS3Location":"s3://cdk-hnb659fds-assets-848360038404-ap-southeast-1/023b0b9ab0f5dab6ccebeae2e29249d5f29f3c9428f77c336c70f04e559b927c.js","dataSourceName":"SystemApiDynamoDataSource","fieldName":"getCustomerByEmail","kind":"UNIT","runtime":{"name":"APPSYNC_JS","runtimeVersion":"1.0.0"},"typeName":"Query"}}}}},"DynamoDBGetCustomerByPhoneResolver":{"id":"DynamoDBGetCustomerByPhoneResolver","path":"SystemApiStack/AppSyncApi/Api/DynamoDBGetCustomerByPhoneResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.235.1"},"children":{"Code":{"id":"Code","path":"SystemApiStack/AppSyncApi/Api/DynamoDBGetCustomerByPhoneResolver/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.235.1"},"children":{"Stage":{"id":"Stage","path":"SystemApiStack/AppSyncApi/Api/DynamoDBGetCustomerByPhoneResolver/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.235.1"}},"AssetBucket":{"id":"AssetBucket","path":"SystemApiStack/AppSyncApi/Api/DynamoDBGetCustomerByPhoneResolver/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.235.1","metadata":[]}}}},"Resource":{"id":"Resource","path":"SystemApiStack/AppSyncApi/Api/DynamoDBGetCustomerByPhoneResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["AppSyncApiEBDAEC17","ApiId"]},"codeS3Location":"s3://cdk-hnb659fds-assets-848360038404-ap-southeast-1/a32ce196c41018340990e66bc91addb6d18f27861636789c04ddd645956719e5.js","fieldName":"getCustomerByPhone","kind":"PIPELINE","pipelineConfig":{"functions":[{"Fn::GetAtt":["DynamoDBResolversDynamoDBGetPhoneLookupFunction3DDEBF83","FunctionId"]},{"Fn::GetAtt":["DynamoDBResolversDynamoDBGetCustomerProfileFunction4E9FFB6C","FunctionId"]}]},"runtime":{"name":"APPSYNC_JS","runtimeVersion":"1.0.0"},"typeName":"Query"}}}}},"DynamoDBListClaimsByCustomerResolver":{"id":"DynamoDBListClaimsByCustomerResolver","path":"SystemApiStack/AppSyncApi/Api/DynamoDBListClaimsByCustomerResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.235.1"},"children":{"Code":{"id":"Code","path":"SystemApiStack/AppSyncApi/Api/DynamoDBListClaimsByCustomerResolver/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.235.1"},"children":{"Stage":{"id":"Stage","path":"SystemApiStack/AppSyncApi/Api/DynamoDBListClaimsByCustomerResolver/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.235.1"}},"AssetBucket":{"id":"AssetBucket","path":"SystemApiStack/AppSyncApi/Api/DynamoDBListClaimsByCustomerResolver/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.235.1","metadata":[]}}}},"Resource":{"id":"Resource","path":"SystemApiStack/AppSyncApi/Api/DynamoDBListClaimsByCustomerResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["AppSyncApiEBDAEC17","ApiId"]},"codeS3Location":"s3://cdk-hnb659fds-assets-848360038404-ap-southeast-1/c5dc01535af40f82671956478e66daaee480987774c6fede30c33d39bd83b4f8.js","dataSourceName":"SystemApiDynamoDataSource","fieldName":"listClaimsByCustomer","kind":"UNIT","runtime":{"name":"APPSYNC_JS","runtimeVersion":"1.0.0"},"typeName":"Query"}}}}},"DynamoDBGetCustomerWithClaimsResolver":{"id":"DynamoDBGetCustomerWithClaimsResolver","path":"SystemApiStack/AppSyncApi/Api/DynamoDBGetCustomerWithClaimsResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.235.1"},"children":{"Code":{"id":"Code","path":"SystemApiStack/AppSyncApi/Api/DynamoDBGetCustomerWithClaimsResolver/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.235.1"},"children":{"Stage":{"id":"Stage","path":"SystemApiStack/AppSyncApi/Api/DynamoDBGetCustomerWithClaimsResolver/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.235.1"}},"AssetBucket":{"id":"AssetBucket","path":"SystemApiStack/AppSyncApi/Api/DynamoDBGetCustomerWithClaimsResolver/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.235.1","metadata":[]}}}},"Resource":{"id":"Resource","path":"SystemApiStack/AppSyncApi/Api/DynamoDBGetCustomerWithClaimsResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["AppSyncApiEBDAEC17","ApiId"]},"codeS3Location":"s3://cdk-hnb659fds-assets-848360038404-ap-southeast-1/03d445d9728b892d8be725bc04e42d1e5402bb2c6d2a985bfa8e45b6fd20c342.js","fieldName":"getCustomerWithClaims","kind":"PIPELINE","pipelineConfig":{"functions":[{"Fn::GetAtt":["DynamoDBResolversDynamoDBGetCustomerForClaimsFunction9C02D0AF","FunctionId"]},{"Fn::GetAtt":["DynamoDBResolversDynamoDBGetClaimsForCustomerFunctionF400FAFF","FunctionId"]}]},"runtime":{"name":"APPSYNC_JS","runtimeVersion":"1.0.0"},"typeName":"Query"}}}}},"DynamoDBGetClaimWithCustomerResolver":{"id":"DynamoDBGetClaimWithCustomerResolver","path":"SystemApiStack/AppSyncApi/Api/DynamoDBGetClaimWithCustomerResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.235.1"},"children":{"Code":{"id":"Code","path":"SystemApiStack/AppSyncApi/Api/DynamoDBGetClaimWithCustomerResolver/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.235.1"},"children":{"Stage":{"id":"Stage","path":"SystemApiStack/AppSyncApi/Api/DynamoDBGetClaimWithCustomerResolver/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.235.1"}},"AssetBucket":{"id":"AssetBucket","path":"SystemApiStack/AppSyncApi/Api/DynamoDBGetClaimWithCustomerResolver/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.235.1","metadata":[]}}}},"Resource":{"id":"Resource","path":"SystemApiStack/AppSyncApi/Api/DynamoDBGetClaimWithCustomerResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["AppSyncApiEBDAEC17","ApiId"]},"codeS3Location":"s3://cdk-hnb659fds-assets-848360038404-ap-southeast-1/cfd666f341432043d2445161bbb51950dcf84a99dc60ab3547f9fb7eb2f21622.js","fieldName":"getClaimWithCustomer","kind":"PIPELINE","pipelineConfig":{"functions":[{"Fn::GetAtt":["DynamoDBResolversDynamoDBGetClaimProfileFunctionA88109AF","FunctionId"]},{"Fn::GetAtt":["DynamoDBResolversDynamoDBGetCustomerForClaimFunction0708C424","FunctionId"]}]},"runtime":{"name":"APPSYNC_JS","runtimeVersion":"1.0.0"},"typeName":"Query"}}}}},"AuroraGetCustomerResolver":{"id":"AuroraGetCustomerResolver","path":"SystemApiStack/AppSyncApi/Api/AuroraGetCustomerResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.235.1"},"children":{"Code":{"id":"Code","path":"SystemApiStack/AppSyncApi/Api/AuroraGetCustomerResolver/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.235.1"},"children":{"Stage":{"id":"Stage","path":"SystemApiStack/AppSyncApi/Api/AuroraGetCustomerResolver/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.235.1"}},"AssetBucket":{"id":"AssetBucket","path":"SystemApiStack/AppSyncApi/Api/AuroraGetCustomerResolver/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.235.1","metadata":[]}}}},"Resource":{"id":"Resource","path":"SystemApiStack/AppSyncApi/Api/AuroraGetCustomerResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["AppSyncApiEBDAEC17","ApiId"]},"codeS3Location":"s3://cdk-hnb659fds-assets-848360038404-ap-southeast-1/cc08ba4bcbc74edb32266441e41151f9072b0b8f739dc8fa4146af27517b8b3d.js","dataSourceName":"RdsDataSource","fieldName":"getCustomerAurora","kind":"UNIT","runtime":{"name":"APPSYNC_JS","runtimeVersion":"1.0.0"},"typeName":"Query"}}}}},"AuroraGetCustomerByPhoneResolver":{"id":"AuroraGetCustomerByPhoneResolver","path":"SystemApiStack/AppSyncApi/Api/AuroraGetCustomerByPhoneResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.235.1"},"children":{"Code":{"id":"Code","path":"SystemApiStack/AppSyncApi/Api/AuroraGetCustomerByPhoneResolver/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.235.1"},"children":{"Stage":{"id":"Stage","path":"SystemApiStack/AppSyncApi/Api/AuroraGetCustomerByPhoneResolver/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.235.1"}},"AssetBucket":{"id":"AssetBucket","path":"SystemApiStack/AppSyncApi/Api/AuroraGetCustomerByPhoneResolver/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.235.1","metadata":[]}}}},"Resource":{"id":"Resource","path":"SystemApiStack/AppSyncApi/Api/AuroraGetCustomerByPhoneResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["AppSyncApiEBDAEC17","ApiId"]},"codeS3Location":"s3://cdk-hnb659fds-assets-848360038404-ap-southeast-1/d70bb7f2d3f72d6e0e413c98c365ac808d5af7b1ba5f80cb36b995b52d9daa4d.js","dataSourceName":"RdsDataSource","fieldName":"getCustomerByPhoneAurora","kind":"UNIT","runtime":{"name":"APPSYNC_JS","runtimeVersion":"1.0.0"},"typeName":"Query"}}}}},"AuroraGetCustomerByEmailResolver":{"id":"AuroraGetCustomerByEmailResolver","path":"SystemApiStack/AppSyncApi/Api/AuroraGetCustomerByEmailResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.235.1"},"children":{"Code":{"id":"Code","path":"SystemApiStack/AppSyncApi/Api/AuroraGetCustomerByEmailResolver/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.235.1"},"children":{"Stage":{"id":"Stage","path":"SystemApiStack/AppSyncApi/Api/AuroraGetCustomerByEmailResolver/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.235.1"}},"AssetBucket":{"id":"AssetBucket","path":"SystemApiStack/AppSyncApi/Api/AuroraGetCustomerByEmailResolver/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.235.1","metadata":[]}}}},"Resource":{"id":"Resource","path":"SystemApiStack/AppSyncApi/Api/AuroraGetCustomerByEmailResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["AppSyncApiEBDAEC17","ApiId"]},"codeS3Location":"s3://cdk-hnb659fds-assets-848360038404-ap-southeast-1/c6727a6e084fee70ac27595555c662749e76e9db9ff499171929d56dc8b4e2e8.js","dataSourceName":"RdsDataSource","fieldName":"getCustomerByEmailAurora","kind":"UNIT","runtime":{"name":"APPSYNC_JS","runtimeVersion":"1.0.0"},"typeName":"Query"}}}}},"AuroraListClaimsByCustomerResolver":{"id":"AuroraListClaimsByCustomerResolver","path":"SystemApiStack/AppSyncApi/Api/AuroraListClaimsByCustomerResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.235.1"},"children":{"Code":{"id":"Code","path":"SystemApiStack/AppSyncApi/Api/AuroraListClaimsByCustomerResolver/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.235.1"},"children":{"Stage":{"id":"Stage","path":"SystemApiStack/AppSyncApi/Api/AuroraListClaimsByCustomerResolver/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.235.1"}},"AssetBucket":{"id":"AssetBucket","path":"SystemApiStack/AppSyncApi/Api/AuroraListClaimsByCustomerResolver/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.235.1","metadata":[]}}}},"Resource":{"id":"Resource","path":"SystemApiStack/AppSyncApi/Api/AuroraListClaimsByCustomerResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["AppSyncApiEBDAEC17","ApiId"]},"codeS3Location":"s3://cdk-hnb659fds-assets-848360038404-ap-southeast-1/a659bde848d8974a2b75e6b7d997370752b1e2ce49b500a5a84ea72150dbd299.js","dataSourceName":"RdsDataSource","fieldName":"listClaimsByCustomerAurora","kind":"UNIT","runtime":{"name":"APPSYNC_JS","runtimeVersion":"1.0.0"},"typeName":"Query"}}}}},"AuroraGetCustomerWithClaimsResolver":{"id":"AuroraGetCustomerWithClaimsResolver","path":"SystemApiStack/AppSyncApi/Api/AuroraGetCustomerWithClaimsResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.235.1"},"children":{"Code":{"id":"Code","path":"SystemApiStack/AppSyncApi/Api/AuroraGetCustomerWithClaimsResolver/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.235.1"},"children":{"Stage":{"id":"Stage","path":"SystemApiStack/AppSyncApi/Api/AuroraGetCustomerWithClaimsResolver/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.235.1"}},"AssetBucket":{"id":"AssetBucket","path":"SystemApiStack/AppSyncApi/Api/AuroraGetCustomerWithClaimsResolver/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.235.1","metadata":[]}}}},"Resource":{"id":"Resource","path":"SystemApiStack/AppSyncApi/Api/AuroraGetCustomerWithClaimsResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["AppSyncApiEBDAEC17","ApiId"]},"codeS3Location":"s3://cdk-hnb659fds-assets-848360038404-ap-southeast-1/b596e96d9d1474f508e086284ad7ef6ee6eea3c50956eecb379e1201b4168384.js","dataSourceName":"RdsDataSource","fieldName":"getCustomerWithClaimsAurora","kind":"UNIT","runtime":{"name":"APPSYNC_JS","runtimeVersion":"1.0.0"},"typeName":"Query"}}}}},"AuroraGetClaimWithCustomerResolver":{"id":"AuroraGetClaimWithCustomerResolver","path":"SystemApiStack/AppSyncApi/Api/AuroraGetClaimWithCustomerResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.235.1"},"children":{"Code":{"id":"Code","path":"SystemApiStack/AppSyncApi/Api/AuroraGetClaimWithCustomerResolver/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.235.1"},"children":{"Stage":{"id":"Stage","path":"SystemApiStack/AppSyncApi/Api/AuroraGetClaimWithCustomerResolver/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.235.1"}},"AssetBucket":{"id":"AssetBucket","path":"SystemApiStack/AppSyncApi/Api/AuroraGetClaimWithCustomerResolver/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.235.1","metadata":[]}}}},"Resource":{"id":"Resource","path":"SystemApiStack/AppSyncApi/Api/AuroraGetClaimWithCustomerResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["AppSyncApiEBDAEC17","ApiId"]},"codeS3Location":"s3://cdk-hnb659fds-assets-848360038404-ap-southeast-1/3135a310d93bd613dcdaec2ffe550ebfb3e0bfc8806fc14f51d07edf5826b38e.js","dataSourceName":"RdsDataSource","fieldName":"getClaimWithCustomerAurora","kind":"UNIT","runtime":{"name":"APPSYNC_JS","runtimeVersion":"1.0.0"},"typeName":"Query"}}}}},"LambdaDataSource":{"id":"LambdaDataSource","path":"SystemApiStack/AppSyncApi/Api/LambdaDataSource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.LambdaDataSource","version":"2.235.1"},"children":{"ServiceRole":{"id":"ServiceRole","path":"SystemApiStack/AppSyncApi/Api/LambdaDataSource/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.235.1","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"SystemApiStack/AppSyncApi/Api/LambdaDataSource/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.235.1","metadata":[]}},"Resource":{"id":"Resource","path":"SystemApiStack/AppSyncApi/Api/LambdaDataSource/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"appsync.amazonaws.com"}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"SystemApiStack/AppSyncApi/Api/LambdaDataSource/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.235.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SystemApiStack/AppSyncApi/Api/LambdaDataSource/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["LambdaResolversFindCustomerByPhoneLambda97D938BB","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["LambdaResolversFindCustomerByPhoneLambda97D938BB","Arn"]},":*"]]}]}],"Version":"2012-10-17"},"policyName":"AppSyncApiLambdaDataSourceServiceRoleDefaultPolicy7F563284","roles":[{"Ref":"AppSyncApiLambdaDataSourceServiceRole7186E2C5"}]}}}}}}},"Resource":{"id":"Resource","path":"SystemApiStack/AppSyncApi/Api/LambdaDataSource/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnDataSource","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::DataSource","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["AppSyncApiEBDAEC17","ApiId"]},"lambdaConfig":{"lambdaFunctionArn":{"Fn::GetAtt":["LambdaResolversFindCustomerByPhoneLambda97D938BB","Arn"]}},"name":"SystemApiLambdaDataSource","serviceRoleArn":{"Fn::GetAtt":["AppSyncApiLambdaDataSourceServiceRole7186E2C5","Arn"]},"type":"AWS_LAMBDA"}}}}},"LambdaGetCustomerByPhoneResolver":{"id":"LambdaGetCustomerByPhoneResolver","path":"SystemApiStack/AppSyncApi/Api/LambdaGetCustomerByPhoneResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.235.1"},"children":{"Resource":{"id":"Resource","path":"SystemApiStack/AppSyncApi/Api/LambdaGetCustomerByPhoneResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["AppSyncApiEBDAEC17","ApiId"]},"dataSourceName":"SystemApiLambdaDataSource","fieldName":"getCustomerByPhoneLambda","kind":"UNIT","typeName":"Query"}}}}}}},"LogGroup":{"id":"LogGroup","path":"SystemApiStack/AppSyncApi/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.235.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SystemApiStack/AppSyncApi/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/appsync/apis/",{"Fn::GetAtt":["AppSyncApiEBDAEC17","ApiId"]}]]},"retentionInDays":7}}}}}}},"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a":{"id":"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a","path":"SystemApiStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"},"children":{"Code":{"id":"Code","path":"SystemApiStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.235.1"},"children":{"Stage":{"id":"Stage","path":"SystemApiStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.235.1"}},"AssetBucket":{"id":"AssetBucket","path":"SystemApiStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.235.1","metadata":[]}}}},"ServiceRole":{"id":"ServiceRole","path":"SystemApiStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.235.1","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"SystemApiStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.235.1","metadata":[]}},"Resource":{"id":"Resource","path":"SystemApiStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"SystemApiStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.235.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SystemApiStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["logs:DeleteRetentionPolicy","logs:PutRetentionPolicy"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRoleDefaultPolicyADDA7DEB","roles":[{"Ref":"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRole9741ECFB"}]}}}}}}},"Resource":{"id":"Resource","path":"SystemApiStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.235.1"}}}},"DynamoDB":{"id":"DynamoDB","path":"SystemApiStack/DynamoDB","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"},"children":{"Table":{"id":"Table","path":"SystemApiStack/DynamoDB/Table","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.235.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SystemApiStack/DynamoDB/Table/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"PK","attributeType":"S"},{"attributeName":"SK","attributeType":"S"},{"attributeName":"GSI1PK","attributeType":"S"},{"attributeName":"GSI1SK","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","globalSecondaryIndexes":[{"indexName":"GSI1","keySchema":[{"attributeName":"GSI1PK","keyType":"HASH"},{"attributeName":"GSI1SK","keyType":"RANGE"}],"projection":{"projectionType":"ALL"}}],"keySchema":[{"attributeName":"PK","keyType":"HASH"},{"attributeName":"SK","keyType":"RANGE"}],"pointInTimeRecoverySpecification":{"pointInTimeRecoveryEnabled":false},"tableName":"SystemApiTable"}}},"ScalingRole":{"id":"ScalingRole","path":"SystemApiStack/DynamoDB/Table/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.235.1","metadata":[]}}}}}},"Aurora":{"id":"Aurora","path":"SystemApiStack/Aurora","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"},"children":{"Vpc":{"id":"Vpc","path":"SystemApiStack/Aurora/Vpc","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.Vpc","version":"2.235.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SystemApiStack/Aurora/Vpc/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnVPC","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::VPC","aws:cdk:cloudformation:props":{"cidrBlock":"10.0.0.0/16","enableDnsHostnames":true,"enableDnsSupport":true,"instanceTenancy":"default","tags":[{"key":"Name","value":"SystemApiStack/Aurora/Vpc"}]}}},"aurora-subnetSubnet1":{"id":"aurora-subnetSubnet1","path":"SystemApiStack/Aurora/Vpc/aurora-subnetSubnet1","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PrivateSubnet","version":"2.235.1","metadata":[]},"children":{"Subnet":{"id":"Subnet","path":"SystemApiStack/Aurora/Vpc/aurora-subnetSubnet1/Subnet","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":"ap-southeast-1a","cidrBlock":"10.0.0.0/24","mapPublicIpOnLaunch":false,"tags":[{"key":"aws-cdk:subnet-name","value":"aurora-subnet"},{"key":"aws-cdk:subnet-type","value":"Isolated"},{"key":"Name","value":"SystemApiStack/Aurora/Vpc/aurora-subnetSubnet1"}],"vpcId":{"Ref":"AuroraVpc881E9D7F"}}}},"Acl":{"id":"Acl","path":"SystemApiStack/Aurora/Vpc/aurora-subnetSubnet1/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.235.1","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"SystemApiStack/Aurora/Vpc/aurora-subnetSubnet1/RouteTable","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"SystemApiStack/Aurora/Vpc/aurora-subnetSubnet1"}],"vpcId":{"Ref":"AuroraVpc881E9D7F"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"SystemApiStack/Aurora/Vpc/aurora-subnetSubnet1/RouteTableAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"AuroraVpcaurorasubnetSubnet1RouteTableECC20BB4"},"subnetId":{"Ref":"AuroraVpcaurorasubnetSubnet1Subnet6F944A8D"}}}}}},"aurora-subnetSubnet2":{"id":"aurora-subnetSubnet2","path":"SystemApiStack/Aurora/Vpc/aurora-subnetSubnet2","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PrivateSubnet","version":"2.235.1","metadata":[]},"children":{"Subnet":{"id":"Subnet","path":"SystemApiStack/Aurora/Vpc/aurora-subnetSubnet2/Subnet","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":"ap-southeast-1b","cidrBlock":"10.0.1.0/24","mapPublicIpOnLaunch":false,"tags":[{"key":"aws-cdk:subnet-name","value":"aurora-subnet"},{"key":"aws-cdk:subnet-type","value":"Isolated"},{"key":"Name","value":"SystemApiStack/Aurora/Vpc/aurora-subnetSubnet2"}],"vpcId":{"Ref":"AuroraVpc881E9D7F"}}}},"Acl":{"id":"Acl","path":"SystemApiStack/Aurora/Vpc/aurora-subnetSubnet2/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.235.1","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"SystemApiStack/Aurora/Vpc/aurora-subnetSubnet2/RouteTable","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"SystemApiStack/Aurora/Vpc/aurora-subnetSubnet2"}],"vpcId":{"Ref":"AuroraVpc881E9D7F"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"SystemApiStack/Aurora/Vpc/aurora-subnetSubnet2/RouteTableAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"AuroraVpcaurorasubnetSubnet2RouteTable01294F69"},"subnetId":{"Ref":"AuroraVpcaurorasubnetSubnet2Subnet0E72BD3C"}}}}}},"RestrictDefaultSecurityGroupCustomResource":{"id":"RestrictDefaultSecurityGroupCustomResource","path":"SystemApiStack/Aurora/Vpc/RestrictDefaultSecurityGroupCustomResource","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.235.1","metadata":[]},"children":{"Default":{"id":"Default","path":"SystemApiStack/Aurora/Vpc/RestrictDefaultSecurityGroupCustomResource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.235.1"}}}}}},"AuroraSecurityGroup":{"id":"AuroraSecurityGroup","path":"SystemApiStack/Aurora/AuroraSecurityGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.235.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SystemApiStack/Aurora/AuroraSecurityGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"Security group for Aurora cluster","securityGroupEgress":[{"cidrIp":"255.255.255.255/32","description":"Disallow all traffic","ipProtocol":"icmp","fromPort":252,"toPort":86}],"vpcId":{"Ref":"AuroraVpc881E9D7F"}}}},"from SystemApiStackAuroraRdsProxySecurityGroup6B49B34C:5432":{"id":"from SystemApiStackAuroraRdsProxySecurityGroup6B49B34C:5432","path":"SystemApiStack/Aurora/AuroraSecurityGroup/from SystemApiStackAuroraRdsProxySecurityGroup6B49B34C:5432","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroupIngress","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroupIngress","aws:cdk:cloudformation:props":{"description":"Allow RDS Proxy to connect to Aurora","fromPort":5432,"groupId":{"Fn::GetAtt":["AuroraAuroraSecurityGroup8305B1C8","GroupId"]},"ipProtocol":"tcp","sourceSecurityGroupId":{"Fn::GetAtt":["AuroraRdsProxySecurityGroup5FA312C7","GroupId"]},"toPort":5432}}},"from SystemApiStackAuroraRdsProxySecurityGroup6B49B34C:{IndirectPort}":{"id":"from SystemApiStackAuroraRdsProxySecurityGroup6B49B34C:{IndirectPort}","path":"SystemApiStack/Aurora/AuroraSecurityGroup/from SystemApiStackAuroraRdsProxySecurityGroup6B49B34C:{IndirectPort}","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroupIngress","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroupIngress","aws:cdk:cloudformation:props":{"description":"Allow connections to the database Cluster from the Proxy","fromPort":{"Fn::GetAtt":["AuroraClusterD4EFE71C","Endpoint.Port"]},"groupId":{"Fn::GetAtt":["AuroraAuroraSecurityGroup8305B1C8","GroupId"]},"ipProtocol":"tcp","sourceSecurityGroupId":{"Fn::GetAtt":["AuroraRdsProxySecurityGroup5FA312C7","GroupId"]},"toPort":{"Fn::GetAtt":["AuroraClusterD4EFE71C","Endpoint.Port"]}}}}}},"RdsProxySecurityGroup":{"id":"RdsProxySecurityGroup","path":"SystemApiStack/Aurora/RdsProxySecurityGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.235.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SystemApiStack/Aurora/RdsProxySecurityGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"Security group for RDS Proxy","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"vpcId":{"Ref":"AuroraVpc881E9D7F"}}}}}},"Credentials":{"id":"Credentials","path":"SystemApiStack/Aurora/Credentials","constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.Secret","version":"2.235.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SystemApiStack/Aurora/Credentials/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.CfnSecret","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SecretsManager::Secret","aws:cdk:cloudformation:props":{"description":"Credentials for Aurora PostgreSQL database","generateSecretString":{"secretStringTemplate":"{\"username\":\"postgres\"}","generateStringKey":"password","excludeCharacters":"\"@/\\"},"name":"aurora-db-credentials"}}},"Attachment":{"id":"Attachment","path":"SystemApiStack/Aurora/Credentials/Attachment","constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.SecretTargetAttachment","version":"2.235.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SystemApiStack/Aurora/Credentials/Attachment/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.CfnSecretTargetAttachment","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SecretsManager::SecretTargetAttachment","aws:cdk:cloudformation:props":{"secretId":{"Ref":"AuroraCredentialsE58A9146"},"targetId":{"Ref":"AuroraClusterD4EFE71C"},"targetType":"AWS::RDS::DBCluster"}}}}}}},"Cluster":{"id":"Cluster","path":"SystemApiStack/Aurora/Cluster","constructInfo":{"fqn":"aws-cdk-lib.aws_rds.DatabaseCluster","version":"2.235.1","metadata":[]},"children":{"Subnets":{"id":"Subnets","path":"SystemApiStack/Aurora/Cluster/Subnets","constructInfo":{"fqn":"aws-cdk-lib.aws_rds.SubnetGroup","version":"2.235.1","metadata":[]},"children":{"Default":{"id":"Default","path":"SystemApiStack/Aurora/Cluster/Subnets/Default","constructInfo":{"fqn":"aws-cdk-lib.aws_rds.CfnDBSubnetGroup","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::RDS::DBSubnetGroup","aws:cdk:cloudformation:props":{"dbSubnetGroupDescription":"Subnets for Cluster database","subnetIds":[{"Ref":"AuroraVpcaurorasubnetSubnet1Subnet6F944A8D"},{"Ref":"AuroraVpcaurorasubnetSubnet2Subnet0E72BD3C"}]}}}}},"AuroraPostgreSqlDatabaseClusterEngineDefaultParameterGroup":{"id":"AuroraPostgreSqlDatabaseClusterEngineDefaultParameterGroup","path":"SystemApiStack/Aurora/Cluster/AuroraPostgreSqlDatabaseClusterEngineDefaultParameterGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.235.1","metadata":[]}},"Resource":{"id":"Resource","path":"SystemApiStack/Aurora/Cluster/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_rds.CfnDBCluster","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::RDS::DBCluster","aws:cdk:cloudformation:props":{"copyTagsToSnapshot":true,"databaseName":"systemapi","dbClusterParameterGroupName":"default.aurora-postgresql17","dbSubnetGroupName":{"Ref":"AuroraClusterSubnets1025DD82"},"deletionProtection":false,"enableCloudwatchLogsExports":["postgresql"],"enableHttpEndpoint":true,"engine":"aurora-postgresql","engineVersion":"17.6","masterUsername":{"Fn::Join":["",["{{resolve:secretsmanager:",{"Ref":"AuroraCredentialsE58A9146"},":SecretString:username::}}"]]},"masterUserPassword":{"Fn::Join":["",["{{resolve:secretsmanager:",{"Ref":"AuroraCredentialsE58A9146"},":SecretString:password::}}"]]},"port":5432,"serverlessV2ScalingConfiguration":{"minCapacity":0.5,"maxCapacity":4},"vpcSecurityGroupIds":[{"Fn::GetAtt":["AuroraAuroraSecurityGroup8305B1C8","GroupId"]}]}}},"writer":{"id":"writer","path":"SystemApiStack/Aurora/Cluster/writer","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.235.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SystemApiStack/Aurora/Cluster/writer/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_rds.CfnDBInstance","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::RDS::DBInstance","aws:cdk:cloudformation:props":{"dbClusterIdentifier":{"Ref":"AuroraClusterD4EFE71C"},"dbInstanceClass":"db.serverless","enablePerformanceInsights":false,"engine":"aurora-postgresql","promotionTier":0,"publiclyAccessible":false}}}}},"Proxy":{"id":"Proxy","path":"SystemApiStack/Aurora/Cluster/Proxy","constructInfo":{"fqn":"aws-cdk-lib.aws_rds.DatabaseProxy","version":"2.235.1","metadata":[]},"children":{"IAMRole":{"id":"IAMRole","path":"SystemApiStack/Aurora/Cluster/Proxy/IAMRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.235.1","metadata":[]},"children":{"ImportIAMRole":{"id":"ImportIAMRole","path":"SystemApiStack/Aurora/Cluster/Proxy/IAMRole/ImportIAMRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.235.1","metadata":[]}},"Resource":{"id":"Resource","path":"SystemApiStack/Aurora/Cluster/Proxy/IAMRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"rds.amazonaws.com"}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"SystemApiStack/Aurora/Cluster/Proxy/IAMRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.235.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SystemApiStack/Aurora/Cluster/Proxy/IAMRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["secretsmanager:DescribeSecret","secretsmanager:GetSecretValue"],"Effect":"Allow","Resource":{"Ref":"AuroraCredentialsE58A9146"}}],"Version":"2012-10-17"},"policyName":"AuroraClusterProxyIAMRoleDefaultPolicy3880F951","roles":[{"Ref":"AuroraClusterProxyIAMRole5ADBACEF"}]}}}}}}},"Resource":{"id":"Resource","path":"SystemApiStack/Aurora/Cluster/Proxy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_rds.CfnDBProxy","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::RDS::DBProxy","aws:cdk:cloudformation:props":{"auth":[{"authScheme":"SECRETS","iamAuth":"DISABLED","secretArn":{"Ref":"AuroraCredentialsE58A9146"}}],"dbProxyName":"aurora-systemapi-proxy","engineFamily":"POSTGRESQL","requireTls":true,"roleArn":{"Fn::GetAtt":["AuroraClusterProxyIAMRole5ADBACEF","Arn"]},"vpcSecurityGroupIds":[{"Fn::GetAtt":["AuroraRdsProxySecurityGroup5FA312C7","GroupId"]}],"vpcSubnetIds":[{"Ref":"AuroraVpcaurorasubnetSubnet1Subnet6F944A8D"},{"Ref":"AuroraVpcaurorasubnetSubnet2Subnet0E72BD3C"}]}}},"ProxyTargetGroup":{"id":"ProxyTargetGroup","path":"SystemApiStack/Aurora/Cluster/Proxy/ProxyTargetGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_rds.CfnDBProxyTargetGroup","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::RDS::DBProxyTargetGroup","aws:cdk:cloudformation:props":{"connectionPoolConfigurationInfo":{"connectionBorrowTimeout":120,"maxConnectionsPercent":100,"maxIdleConnectionsPercent":50},"dbClusterIdentifiers":[{"Ref":"AuroraClusterD4EFE71C"}],"dbProxyName":{"Ref":"AuroraClusterProxy15D20DFD"},"targetGroupName":"default"}}}}}}}}},"Custom::VpcRestrictDefaultSGCustomResourceProvider":{"id":"Custom::VpcRestrictDefaultSGCustomResourceProvider","path":"SystemApiStack/Custom::VpcRestrictDefaultSGCustomResourceProvider","constructInfo":{"fqn":"aws-cdk-lib.CustomResourceProviderBase","version":"2.235.1"},"children":{"Staging":{"id":"Staging","path":"SystemApiStack/Custom::VpcRestrictDefaultSGCustomResourceProvider/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.235.1"}},"Role":{"id":"Role","path":"SystemApiStack/Custom::VpcRestrictDefaultSGCustomResourceProvider/Role","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.235.1"}},"Handler":{"id":"Handler","path":"SystemApiStack/Custom::VpcRestrictDefaultSGCustomResourceProvider/Handler","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.235.1"}}}},"DynamoDBResolvers":{"id":"DynamoDBResolvers","path":"SystemApiStack/DynamoDBResolvers","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"},"children":{"DynamoDBGetPhoneLookupFunction":{"id":"DynamoDBGetPhoneLookupFunction","path":"SystemApiStack/DynamoDBResolvers/DynamoDBGetPhoneLookupFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.AppsyncFunction","version":"2.235.1","metadata":[]},"children":{"Code":{"id":"Code","path":"SystemApiStack/DynamoDBResolvers/DynamoDBGetPhoneLookupFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.235.1"},"children":{"Stage":{"id":"Stage","path":"SystemApiStack/DynamoDBResolvers/DynamoDBGetPhoneLookupFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.235.1"}},"AssetBucket":{"id":"AssetBucket","path":"SystemApiStack/DynamoDBResolvers/DynamoDBGetPhoneLookupFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.235.1","metadata":[]}}}},"Resource":{"id":"Resource","path":"SystemApiStack/DynamoDBResolvers/DynamoDBGetPhoneLookupFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnFunctionConfiguration","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::FunctionConfiguration","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["AppSyncApiEBDAEC17","ApiId"]},"codeS3Location":"s3://cdk-hnb659fds-assets-848360038404-ap-southeast-1/a445a78593ddf5f46da5e75de24800440dde63f9f077c8eade4159dc97ce4dda.js","dataSourceName":"SystemApiDynamoDataSource","functionVersion":"2018-05-29","name":"SystemApiGetPhoneLookup","runtime":{"name":"APPSYNC_JS","runtimeVersion":"1.0.0"}}}}}},"DynamoDBGetCustomerProfileFunction":{"id":"DynamoDBGetCustomerProfileFunction","path":"SystemApiStack/DynamoDBResolvers/DynamoDBGetCustomerProfileFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.AppsyncFunction","version":"2.235.1","metadata":[]},"children":{"Code":{"id":"Code","path":"SystemApiStack/DynamoDBResolvers/DynamoDBGetCustomerProfileFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.235.1"},"children":{"Stage":{"id":"Stage","path":"SystemApiStack/DynamoDBResolvers/DynamoDBGetCustomerProfileFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.235.1"}},"AssetBucket":{"id":"AssetBucket","path":"SystemApiStack/DynamoDBResolvers/DynamoDBGetCustomerProfileFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.235.1","metadata":[]}}}},"Resource":{"id":"Resource","path":"SystemApiStack/DynamoDBResolvers/DynamoDBGetCustomerProfileFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnFunctionConfiguration","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::FunctionConfiguration","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["AppSyncApiEBDAEC17","ApiId"]},"codeS3Location":"s3://cdk-hnb659fds-assets-848360038404-ap-southeast-1/1c95d0736018cb234ee065bd2d3ed955678bf8fc234e2276bd750d0d0e0b5678.js","dataSourceName":"SystemApiDynamoDataSource","functionVersion":"2018-05-29","name":"SystemApiGetCustomerProfile","runtime":{"name":"APPSYNC_JS","runtimeVersion":"1.0.0"}}}}}},"DynamoDBGetCustomerForClaimsFunction":{"id":"DynamoDBGetCustomerForClaimsFunction","path":"SystemApiStack/DynamoDBResolvers/DynamoDBGetCustomerForClaimsFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.AppsyncFunction","version":"2.235.1","metadata":[]},"children":{"Code":{"id":"Code","path":"SystemApiStack/DynamoDBResolvers/DynamoDBGetCustomerForClaimsFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.235.1"},"children":{"Stage":{"id":"Stage","path":"SystemApiStack/DynamoDBResolvers/DynamoDBGetCustomerForClaimsFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.235.1"}},"AssetBucket":{"id":"AssetBucket","path":"SystemApiStack/DynamoDBResolvers/DynamoDBGetCustomerForClaimsFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.235.1","metadata":[]}}}},"Resource":{"id":"Resource","path":"SystemApiStack/DynamoDBResolvers/DynamoDBGetCustomerForClaimsFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnFunctionConfiguration","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::FunctionConfiguration","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["AppSyncApiEBDAEC17","ApiId"]},"codeS3Location":"s3://cdk-hnb659fds-assets-848360038404-ap-southeast-1/5317b24180b03000da72f3906a3ce5063e96c1d22c6b8e3318c9dbda022d2874.js","dataSourceName":"SystemApiDynamoDataSource","functionVersion":"2018-05-29","name":"SystemApiGetCustomerForClaims","runtime":{"name":"APPSYNC_JS","runtimeVersion":"1.0.0"}}}}}},"DynamoDBGetClaimsForCustomerFunction":{"id":"DynamoDBGetClaimsForCustomerFunction","path":"SystemApiStack/DynamoDBResolvers/DynamoDBGetClaimsForCustomerFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.AppsyncFunction","version":"2.235.1","metadata":[]},"children":{"Code":{"id":"Code","path":"SystemApiStack/DynamoDBResolvers/DynamoDBGetClaimsForCustomerFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.235.1"},"children":{"Stage":{"id":"Stage","path":"SystemApiStack/DynamoDBResolvers/DynamoDBGetClaimsForCustomerFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.235.1"}},"AssetBucket":{"id":"AssetBucket","path":"SystemApiStack/DynamoDBResolvers/DynamoDBGetClaimsForCustomerFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.235.1","metadata":[]}}}},"Resource":{"id":"Resource","path":"SystemApiStack/DynamoDBResolvers/DynamoDBGetClaimsForCustomerFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnFunctionConfiguration","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::FunctionConfiguration","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["AppSyncApiEBDAEC17","ApiId"]},"codeS3Location":"s3://cdk-hnb659fds-assets-848360038404-ap-southeast-1/7391b24980c2e875efa47d1c32f160c2253691bc2447f0d03ebab6d207b447b8.js","dataSourceName":"SystemApiDynamoDataSource","functionVersion":"2018-05-29","name":"SystemApiGetClaimsForCustomer","runtime":{"name":"APPSYNC_JS","runtimeVersion":"1.0.0"}}}}}},"DynamoDBGetClaimProfileFunction":{"id":"DynamoDBGetClaimProfileFunction","path":"SystemApiStack/DynamoDBResolvers/DynamoDBGetClaimProfileFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.AppsyncFunction","version":"2.235.1","metadata":[]},"children":{"Code":{"id":"Code","path":"SystemApiStack/DynamoDBResolvers/DynamoDBGetClaimProfileFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.235.1"},"children":{"Stage":{"id":"Stage","path":"SystemApiStack/DynamoDBResolvers/DynamoDBGetClaimProfileFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.235.1"}},"AssetBucket":{"id":"AssetBucket","path":"SystemApiStack/DynamoDBResolvers/DynamoDBGetClaimProfileFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.235.1","metadata":[]}}}},"Resource":{"id":"Resource","path":"SystemApiStack/DynamoDBResolvers/DynamoDBGetClaimProfileFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnFunctionConfiguration","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::FunctionConfiguration","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["AppSyncApiEBDAEC17","ApiId"]},"codeS3Location":"s3://cdk-hnb659fds-assets-848360038404-ap-southeast-1/96e83e12bd75a265babaa87d3dd686983bb8c67843a7584661b0e969bdfd75e8.js","dataSourceName":"SystemApiDynamoDataSource","functionVersion":"2018-05-29","name":"SystemApiGetClaimProfile","runtime":{"name":"APPSYNC_JS","runtimeVersion":"1.0.0"}}}}}},"DynamoDBGetCustomerForClaimFunction":{"id":"DynamoDBGetCustomerForClaimFunction","path":"SystemApiStack/DynamoDBResolvers/DynamoDBGetCustomerForClaimFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.AppsyncFunction","version":"2.235.1","metadata":[]},"children":{"Code":{"id":"Code","path":"SystemApiStack/DynamoDBResolvers/DynamoDBGetCustomerForClaimFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.235.1"},"children":{"Stage":{"id":"Stage","path":"SystemApiStack/DynamoDBResolvers/DynamoDBGetCustomerForClaimFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.235.1"}},"AssetBucket":{"id":"AssetBucket","path":"SystemApiStack/DynamoDBResolvers/DynamoDBGetCustomerForClaimFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.235.1","metadata":[]}}}},"Resource":{"id":"Resource","path":"SystemApiStack/DynamoDBResolvers/DynamoDBGetCustomerForClaimFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnFunctionConfiguration","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::FunctionConfiguration","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["AppSyncApiEBDAEC17","ApiId"]},"codeS3Location":"s3://cdk-hnb659fds-assets-848360038404-ap-southeast-1/e6a9b1641a9982eb0d5f91045aa40fa67594c1fc4f1793fc471cd5213575f6c6.js","dataSourceName":"SystemApiDynamoDataSource","functionVersion":"2018-05-29","name":"SystemApiGetCustomerForClaim","runtime":{"name":"APPSYNC_JS","runtimeVersion":"1.0.0"}}}}}}}},"AuroraResolvers":{"id":"AuroraResolvers","path":"SystemApiStack/AuroraResolvers","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"}},"LambdaResolvers":{"id":"LambdaResolvers","path":"SystemApiStack/LambdaResolvers","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"},"children":{"FindCustomerByPhoneLambda":{"id":"FindCustomerByPhoneLambda","path":"SystemApiStack/LambdaResolvers/FindCustomerByPhoneLambda","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.235.1","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"SystemApiStack/LambdaResolvers/FindCustomerByPhoneLambda/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.235.1","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"SystemApiStack/LambdaResolvers/FindCustomerByPhoneLambda/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.235.1","metadata":[]}},"Resource":{"id":"Resource","path":"SystemApiStack/LambdaResolvers/FindCustomerByPhoneLambda/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"SystemApiStack/LambdaResolvers/FindCustomerByPhoneLambda/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.235.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SystemApiStack/LambdaResolvers/FindCustomerByPhoneLambda/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:ConditionCheckItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:Scan"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["DynamoDBTableFD3F8884","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["DynamoDBTableFD3F8884","Arn"]},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"LambdaResolversFindCustomerByPhoneLambdaServiceRoleDefaultPolicyBA4423F7","roles":[{"Ref":"LambdaResolversFindCustomerByPhoneLambdaServiceRoleDA2EFFAC"}]}}}}}}},"Code":{"id":"Code","path":"SystemApiStack/LambdaResolvers/FindCustomerByPhoneLambda/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.235.1"},"children":{"Stage":{"id":"Stage","path":"SystemApiStack/LambdaResolvers/FindCustomerByPhoneLambda/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.235.1"}},"AssetBucket":{"id":"AssetBucket","path":"SystemApiStack/LambdaResolvers/FindCustomerByPhoneLambda/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.235.1","metadata":[]}}}},"Resource":{"id":"Resource","path":"SystemApiStack/LambdaResolvers/FindCustomerByPhoneLambda/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-848360038404-ap-southeast-1","s3Key":"b71e23d1b608952266ab10ac864b0a1f38f427a86cdd7bf4554fe8a6ee80e8c7.zip"},"environment":{"variables":{"TABLE_NAME":{"Ref":"DynamoDBTableFD3F8884"}}},"functionName":"SystemApiFindCustomerByPhoneLambda","handler":"index.handler","role":{"Fn::GetAtt":["LambdaResolversFindCustomerByPhoneLambdaServiceRoleDA2EFFAC","Arn"]},"runtime":"nodejs20.x","timeout":10}}}}}}},"GraphQLEndpoint":{"id":"GraphQLEndpoint","path":"SystemApiStack/GraphQLEndpoint","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.235.1"}},"ApiKey":{"id":"ApiKey","path":"SystemApiStack/ApiKey","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.235.1"}},"ApiId":{"id":"ApiId","path":"SystemApiStack/ApiId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.235.1"}},"DynamoDBTableName":{"id":"DynamoDBTableName","path":"SystemApiStack/DynamoDBTableName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.235.1"}},"AuroraClusterEndpoint":{"id":"AuroraClusterEndpoint","path":"SystemApiStack/AuroraClusterEndpoint","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.235.1"}},"RdsProxyEndpoint":{"id":"RdsProxyEndpoint","path":"SystemApiStack/RdsProxyEndpoint","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.235.1"}},"DatabaseSecretArn":{"id":"DatabaseSecretArn","path":"SystemApiStack/DatabaseSecretArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.235.1"}},"DatabaseName":{"id":"DatabaseName","path":"SystemApiStack/DatabaseName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.235.1"}},"AuroraClusterArn":{"id":"AuroraClusterArn","path":"SystemApiStack/AuroraClusterArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.235.1"}},"Region":{"id":"Region","path":"SystemApiStack/Region","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.235.1"}},"CDKMetadata":{"id":"CDKMetadata","path":"SystemApiStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"},"children":{"Default":{"id":"Default","path":"SystemApiStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.235.1"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"SystemApiStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.235.1"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"SystemApiStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.235.1"}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"}}}}}