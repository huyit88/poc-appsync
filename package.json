{
  "name": "poc-appsync",
  "version": "1.0.0",
  "description": "Read-only System API using AWS AppSync, DynamoDB, and CDK",
  "private": true,
  "workspaces": [
    "infra",
    "scripts",
    "src"
  ],
  "scripts": {
    "bootstrap": "npm install && npm run build",
    "build": "npm run schema:compose && npm run build --workspaces --if-present",
    "schema:compose": "tsx scripts/compose-schema.ts",
    "dev:local": "npm run db:local & sleep 3 && npm run db:migrate:local && npm run db:seed:local",
    "db:local": "docker-compose up -d",
    "db:local:stop": "docker-compose down",
    "db:migrate:local": "tsx scripts/migrate.ts",
    "db:seed:local": "DYNAMODB_ENDPOINT=http://localhost:8000 tsx scripts/seed.ts",
    "db:seed:aws": "tsx scripts/seed.ts",
    "seed:customers:local": "DYNAMODB_ENDPOINT=http://localhost:8000 tsx scripts/seed-customers.ts",
    "seed:customers:1k": "tsx scripts/seed-customers-1k.ts",
    "seed:customers:1k:local": "DYNAMODB_ENDPOINT=http://localhost:8000 tsx scripts/seed-customers-1k.ts",
    "seed:customers:10k": "tsx scripts/seed-customers-10k.ts",
    "seed:customers:10k:local": "DYNAMODB_ENDPOINT=http://localhost:8000 tsx scripts/seed-customers-10k.ts",
    "seed:customers:100k": "tsx scripts/seed-customers-100k.ts",
    "seed:customers:100k:local": "DYNAMODB_ENDPOINT=http://localhost:8000 tsx scripts/seed-customers-100k.ts",
    "seed:claims": "tsx scripts/seed-claims.ts",
    "seed:claims:local": "DYNAMODB_ENDPOINT=http://localhost:8000 tsx scripts/seed-claims.ts",    
    "verify:claims": "tsx scripts/verify-claims-data.ts",
    "deploy:dev": "./infra/cdk-wrapper.sh deploy --require-approval never",
    "deploy": "./infra/cdk-wrapper.sh deploy SystemApiStack --require-approval never",
    "cdk:bootstrap": "./infra/cdk-wrapper.sh bootstrap",
    "cdk:diff": "./infra/cdk-wrapper.sh diff",
    "cdk:synth": "./infra/cdk-wrapper.sh synth",
    "cdk:destroy": "./infra/cdk-wrapper.sh destroy",
    "deploy:cf": "./cloudformation/deploy.sh",
    "deploy:cf:generate": "npx tsx cloudformation/generate-template.ts",
    "deploy:cf:validate": "./cloudformation/validate-template.sh",
    "query:dev": "tsx scripts/query.ts",
    "test": "jest",
    "test:watch": "jest --watch",
    "test:integration": "tsx scripts/test-customers.ts",
    "test:customers": "tsx scripts/test-customers.ts",
    "perf:customers": "tsx scripts/perf-customers.ts",
    "perf:run": "tsx scripts/perf/run-benchmark.ts",
    "perf:ap-001": "SCENARIO=customers/AP-001-getCustomer npm run perf:run",
    "perf:ap-002": "SCENARIO=customers/AP-002-getCustomerByPhone npm run perf:run",
    "perf:ap-003": "SCENARIO=customers/AP-003-getCustomerByPhoneLambda npm run perf:run",
    "perf:ap-005": "SCENARIO=customers/AP-005-getCustomerByEmail npm run perf:run",
    "perf:ap-006": "SCENARIO=claims/AP-006-listClaimsByCustomer npm run perf:run",
    "perf:ap-007": "SCENARIO=customers/AP-007-getCustomerWithClaims npm run perf:run",
    "perf:ap-008": "SCENARIO=claims/AP-008-getClaimWithCustomer npm run perf:run",
    "perf:aurora:ap-001": "SCENARIO=customers-aurora/AP-001-getCustomer npm run perf:run",
    "perf:aurora:ap-002": "SCENARIO=customers-aurora/AP-002-getCustomerByPhone npm run perf:run",
    "perf:aurora:ap-005": "SCENARIO=customers-aurora/AP-005-getCustomerByEmail npm run perf:run",
    "perf:aurora:ap-006": "SCENARIO=claims-aurora/AP-006-listClaimsByCustomer npm run perf:run",
    "perf:aurora:ap-007": "SCENARIO=customers-aurora/AP-007-getCustomerWithClaims npm run perf:run",
    "perf:aurora:ap-008": "SCENARIO=claims-aurora/AP-008-getClaimWithCustomer npm run perf:run",
    "perf:custom": "npm run perf:run",
    "aurora:migrate": "tsx domains/customers/data/aurora/migrate.ts",
    "aurora:migrate:claims": "tsx domains/claims/data/aurora/migrate.ts",
    "aurora:seed:customers": "tsx domains/customers/data/aurora/seed.ts",
    "aurora:seed:customers:1k": "tsx domains/customers/data/aurora/seed-1k.ts",
    "aurora:seed:customers:10k": "tsx domains/customers/data/aurora/seed-10k.ts",
    "aurora:seed:customers:100k": "tsx domains/customers/data/aurora/seed-100k.ts",
    "aurora:seed:claims": "tsx domains/claims/data/aurora/seed.ts",
    "aurora:setup": "npm run aurora:seed",
    "aurora:setup:1k": "npm run aurora:seed:1k",
    "aurora:setup:10k": "npm run aurora:seed:10k",
    "aurora:setup:100k": "npm run aurora:seed:100k",
    "lint": "eslint . --ext .ts,.js --max-warnings 0",
    "lint:fix": "eslint . --ext .ts,.js --fix"
  },
  "devDependencies": {
    "@types/jest": "^29.5.0",
    "@types/node": "^20.0.0",
    "@types/node-fetch": "^2.6.0",
    "@typescript-eslint/eslint-plugin": "^6.0.0",
    "@typescript-eslint/parser": "^6.0.0",
    "eslint": "^8.50.0",
    "jest": "^29.7.0",
    "ts-jest": "^29.1.0",
    "tsx": "^4.0.0",
    "typescript": "^5.2.0"
  },
  "engines": {
    "node": ">=18.0.0"
  }
}

